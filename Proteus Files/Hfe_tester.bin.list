EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
Hfe_tester.bin -- emu8086 assembler version: 4.08  
 
[ 19-04-2021  --  12:47:47 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       #make_bin#
[   2]        :                                       
[   3]        :                                       
[   4]        :                                       #LOAD_SEGMENT=FFFFh#
[   5]        :                                       #LOAD_OFFSET=0000h#
[   6]        :                                       
[   7]        :                                       #CS=0000h#
[   8]        :                                       #IP=0000h#
[   9]        :                                       
[  10]        :                                       #DS=0000h#
[  11]        :                                       #ES=0000h#
[  12]        :                                       
[  13]        :                                       #SS=0000h#
[  14]        :                                       #SP=FFFEh#
[  15]        :                                       
[  16]        :                                       #AX=0000h#
[  17]        :                                       #BX=0000h#
[  18]        :                                       #CX=0000h#
[  19]        :                                       #DX=0000h#
[  20]        :                                       #SI=0000h#
[  21]        :                                       #DI=0000h#
[  22]        :                                       #BP=0000h#
[  23]        :                                       
[  24]        :                                       
[  25]    0000: E9 FD 03                              		jmp     st1
[  26]    0003: 90                                    nop
[  27]    0004: 00 00                                 dw      0000
[  28]    0006: 00 00                                 dw      0000
[  29]    0008: 2D 06                                 dw      ad_isr
[  30]    000A: 00 00                                 dw      0000
[  31]        :                                       		
[  32]    000C: 00 00 00 00 00 00 00 00 00 00 00 00   		db     1012 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00                         
[  33]        :                                       
[  34]        :                                       
[  35]        :                                       
[  36]        :                                       porta1 equ 00h
[  37]        :                                       portb1 equ 02h
[  38]        :                                       portc1 equ 04h
[  39]        :                                       creg1  equ 06h
[  40]        :                                       porta2 equ 08h
[  41]        :                                       portb2 equ 0Ah
[  42]        :                                       portc2 equ 0Ch
[  43]        :                                       creg2  equ 0Eh
[  44]        :                                       
[  45]        :                                       measure macro value,jpoi
[  46]        :                                       mov bl,value;
[  47]        :                                       mov al,value;
[  48]        :                                       out portb2,al;
[  49]        :                                       mov al , 00001000b;
[  50]        :                                       out portc2,al;
[  51]        :                                       mov di,1;
[  52]        :                                       mov al ,00h;
[  53]        :                                       out portc2,al;
[  54]        :                                       or al ,  00000010b;
[  55]        :                                       out portc2,al
[  56]        :                                       or al , 00000001b;
[  57]        :                                       out portc2,al;
[  58]        :                                       
[  59]        :                                       nop
[  60]        :                                       nop
[  61]        :                                       nop
[  62]        :                                       nop
[  63]        :                                       nop
[  64]        :                                       nop
[  65]        :                                       
[  66]        :                                       and al ,11111110b;
[  67]        :                                       out portc2,al
[  68]        :                                       and al , 11111101b;
[  69]        :                                       out portc2 ,al
[  70]        :                                       jpoi:        cmp di,0;
[  71]        :                                       jnz jpoi;
[  72]        :                                       
[  73]        :                                       endm		
[  74]        :                                       ;main program
[  75]    0400: FA                                    st1:		cli
[  76]        :                                       ; intialize ds, es,ss to start of RAM
[  77]    0401: B8 00 02                              mov       ax,0200h
[  78]    0404: 8E D8                                 mov       ds,ax
[  79]    0406: 8E C0                                 mov       es,ax
[  80]    0408: 8E D0                                 mov       ss,ax
[  81]    040A: BC FE FF                              mov       sp,0FFFEH
[  82]    040D: BE 00 00                              mov       si,0000h;
[  83]        :                                       
[  84]        :                                       
[  85]        :                                       
[  86]    0410: B0 80                                 mov al, 80h
[  87]    0412: E6 06                                 out creg1,al;
[  88]    0414: B0 90                                 mov al ,90h
[  89]    0416: E6 0E                                 out creg2,al;
[  90]        :                                       ;can be made into macro;
[  91]    0418: E4 0C                                 off:        in al , portc2;
[  92]    041A: 24 80                                 and al, 80h;
[  93]    041C: 74 FA                                 jz off
[  94]        :                                       
[  95]    041E: B3 FF B0 FF E6 0A B0 08 E6 0C BF 01   zero: measure 255,busy1
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[  96]    044A: AD                                    lodsw;
[  97]    044B: 3D 00 00                              cmp ax,00;
[  98]    044E: BE 00 00                              mov si,00;
[  99]    0451: 74 CB                                 jz zero;
[ 100]        :                                       
[ 101]    0453: B3 E7 B0 E7 E6 0A B0 08 E6 0C BF 01   measure 231,busy2;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 102]    047F: 46                                    inc si;
[ 103]    0480: 46                                    inc si;
[ 104]    0481: B3 CD B0 CD E6 0A B0 08 E6 0C BF 01   measure 205,busy3;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 105]    04AD: 46                                    inc si;
[ 106]    04AE: 46                                    inc si;
[ 107]    04AF: B3 B3 B0 B3 E6 0A B0 08 E6 0C BF 01   measure 179,busy4;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 108]    04DB: 46                                    inc si;
[ 109]    04DC: 46                                    inc si;
[ 110]    04DD: B3 9A B0 9A E6 0A B0 08 E6 0C BF 01   measure 154, busy5;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 111]    0509: 46                                    inc si;
[ 112]    050A: 46                                    inc si;
[ 113]    050B: B3 80 B0 80 E6 0A B0 08 E6 0C BF 01   measure 128,busy6;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 114]    0537: 46                                    inc si;
[ 115]    0538: 46                                    inc si;
[ 116]    0539: B3 67 B0 67 E6 0A B0 08 E6 0C BF 01   measure 103, busy7;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 117]    0565: 46                                    inc si;
[ 118]    0566: 46                                    inc si;
[ 119]    0567: B3 4D B0 4D E6 0A B0 08 E6 0C BF 01   measure 77 ,busy8;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 120]    0593: 46                                    inc si;
[ 121]    0594: 46                                    inc si;
[ 122]    0595: B3 33 B0 33 E6 0A B0 08 E6 0C BF 01   measure 51 ,busy9;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 123]    05C1: 46                                    inc si;
[ 124]    05C2: 46                                    inc si;
[ 125]    05C3: B3 1A B0 1A E6 0A B0 08 E6 0C BF 01   measure 26,busy10;
                00 B0 00 E6 0C 0C 02 E6 0C 0C 01 E6 
                0C 90 90 90 90 90 90 24 FE E6 0C 24 
                FD E6 0C 83 FF 00 75 FB             
[ 126]        :                                       
[ 127]        :                                       
[ 128]    05EF: BE 00 00                              mov si , 0000h;
[ 129]    05F2: BA 00 00                              mov dx, 0000h;
[ 130]    05F5: B9 09 00                              mov cx, 9;
[ 131]        :                                       
[ 132]    05F8: 03 14                                 loopi: add dx,[si];
[ 133]    05FA: 46                                    inc si ;
[ 134]    05FB: 46                                    inc si;
[ 135]    05FC: E2 FA                                 loop loopi;
[ 136]    05FE: 81 FA C8 00                           cmp dx,200;
[ 137]    0602: 7F 04                                 jg noAlarm;
[ 138]    0604:                                       alarm:
[ 139]    0604: B0 10                                 mov al, 00010000b;
[ 140]    0606: E6 04                                 out portc1,al;
[ 141]        :                                       
[ 142]        :                                       
[ 143]    0608:                                       noAlarm::
[ 144]    0608: 8B FE                                 mov di, si;
[ 145]        :                                       
[ 146]    060A: 8B C2                                 mov ax,dx;
[ 147]        :                                       
[ 148]    060C: B3 64                                 mov bl, 100;
[ 149]    060E: F6 F3                                 div bl;
[ 150]    0610: 8A D0                                 mov dl,al;
[ 151]    0612: 8A C4                                 mov al,ah;
[ 152]    0614: B4 00                                 mov ah,00h;
[ 153]    0616: B3 0A                                 mov bl, 10;
[ 154]    0618: F6 F3                                 div bl;
[ 155]        :                                       
[ 156]        :                                       
[ 157]        :                                       
[ 158]        :                                       
[ 159]    061A: 8A F0                                 mov dh,al
[ 160]    061C:                                       x2:
[ 161]    061C: 8A C6                                 mov al,dh
[ 162]    061E: E6 00                                 out porta1 ,al
[ 163]    0620: 8A C4                                 mov al , ah
[ 164]    0622: E6 04                                 out portc1,al;
[ 165]    0624: 8A C2                                 mov al,dl
[ 166]    0626: E6 02                                 out portb1,al
[ 167]        :                                       
[ 168]        :                                       
[ 169]        :                                       
[ 170]        :                                       
[ 171]    0628: E2 F2                                 loop x2
[ 172]        :                                       
[ 173]    062A:                                       end_of_asm:
[ 174]    062A: 90                                    nop
[ 175]    062B: EB FD                                 jmp end_of_asm
[ 176]        :                                       
[ 177]        :                                       
[ 178]        :                                       
[ 179]        :                                       
[ 180]        :                                       
[ 181]        :                                       
[ 182]        :                                       
[ 183]    062D:                                       ad_isr:
[ 184]    062D: 50                                    push ax
[ 185]    062E: 52                                    push dx
[ 186]    062F: 4F                                    dec di
[ 187]    0630: B0 04                                 mov al , 00000100b;
[ 188]    0632: E6 0C                                 out portc2,al;
[ 189]    0634: E4 08                                 in al , porta2;
[ 190]    0636: B4 FF                                 mov ah , 255;
[ 191]    0638: 2A E0                                 sub ah,al;
[ 192]    063A: 8A C4                                 mov al , ah;
[ 193]    063C: B4 00                                 mov ah ,00
[ 194]    063E: B6 FA                                 mov dh,250;
[ 195]    0640: F6 E6                                 mul dh;
[ 196]        :                                       ;mov dl ,bl;
[ 197]    0642: F6 F3                                 div bl;
[ 198]        :                                       
[ 199]        :                                       
[ 200]        :                                       ;mov dh , ah;
[ 201]        :                                       
[ 202]    0644: B2 02                                 mov dl , 2;
[ 203]    0646: F6 E2                                 mul dl
[ 204]        :                                       
[ 205]    0648: 89 04                                 mov [si],ax
[ 206]    064A: B0 00                                 mov al ,00h
[ 207]    064C: E6 0C                                 out portc2,al;
[ 208]    064E: 5A                                    pop dx;
[ 209]    064F: 58                                    pop ax
[ 210]        :                                       
[ 211]    0650: CF                                    iret
[ 212]        :                                       
 
===================================================================================================
 




===================================================================================================
